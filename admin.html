<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>לוח ניהול – יערת העמק</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="admin.css" />
</head>

<body>
  <script type="module" src="analytics.js"></script>

  <!-- HEADER -->
  <header class="header-main">
    <div class="container">
      <nav class="nav">
        <div class="nav-left">
          <div class="logo-circle">
            <span>יערת<br>העמק</span>
          </div>

          <div>
            <div class="school-title-main">לוח ניהול · יערת העמק</div>
            <div class="school-title-sub">
              <a href="index.html">חזרה לאתר התלמידים</a>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- סיידבר שכבות לאדמין (מחוץ ל-header) -->
  <div class="admin-grade-switcher">
    <button class="grade-filter-btn active" data-grade="all">כל השכבות</button>
    <button class="grade-filter-btn" data-grade="z">שכבת ז'</button>
    <button class="grade-filter-btn" data-grade="h">שכבת ח'</button>
    <button class="grade-filter-btn" data-grade="t">שכבת ט'</button>
  </div>

  <section>
    <div class="container">

      <p id="auth-status" class="section-subtitle">בודק התחברות...</p>

      <!-- LOGIN -->
      <div id="login-section">
        <div class="section-header">
          <h2 class="section-title">התחברות אדמין</h2>
          <p class="section-subtitle">כניסה למנהלי המערכת בלבד</p>
        </div>

        <form id="login-form" style="max-width:360px;margin:0 auto;">
          <label>אימייל</label>
          <input type="email" name="email" required />

          <label>סיסמה</label>
          <input type="password" name="password" required />

          <button type="submit" style="width:100%;margin-top:10px;">כניסה</button>
        </form>

        <div style="max-width:360px;margin:15px auto 0;text-align:center;">
          <p class="section-subtitle" style="margin-bottom:8px;">
            אין לך משתמש אדמין?
          </p>
          <a href="register.html" class="btn-outline" style="display:inline-block;padding:8px 16px;border-radius:999px;">
            בקשת הרשמה
          </a>
        </div>
      </div>

      <!-- ADMIN PANEL -->
      <div id="admin-section" class="admin-layout" style="display:none;">
        <button id="logout-btn" class="btn-outline">התנתקות</button>

        <div class="section-header">
          <h2 class="section-title">ניהול חדשות, מבחנים, מודעות, סקרים ותוכן האתר</h2>
          <p class="section-subtitle">
            כל שינוי נשמר אוטומטית ונראה באתר התלמידים.
          </p>
        </div>

        <!-- כפתור לאנליטיקות -->
        <a href="analytics.html" target="_blank" class="btn-outline" style="display:inline-block;margin-bottom:20px;">
          אנליטיקות
        </a>

        <!-- NEWS -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">חדשות לפי שכבות</h3>
        <p class="section-subtitle">ניתן להוסיף קישור לתמונה, להעלות תמונה ולצבע טקסט (אופציונלי).</p>

        <div class="admin-columns">
          <!-- NEWS Z -->
          <section class="admin-grade-section" data-grade="z">
            <div class="card">
              <h3>שכבת ז'</h3>
              <div id="admin-news-z" class="admin-list"></div>

              <form id="news-form-z">
                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <!-- העלאת תמונה מקובץ -->
                <label>תמונה מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לז'</button>
              </form>
            </div>
          </section>

          <!-- NEWS H -->
          <section class="admin-grade-section" data-grade="h">
            <div class="card">
              <h3>שכבת ח'</h3>
              <div id="admin-news-h" class="admin-list"></div>

              <form id="news-form-h">
                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <label>תמונה מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לח'</button>
              </form>
            </div>
          </section>

          <!-- NEWS T -->
          <section class="admin-grade-section" data-grade="t">
            <div class="card">
              <h3>שכבת ט'</h3>
              <div id="admin-news-t" class="admin-list"></div>

              <form id="news-form-t">
                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <label>תמונה מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לט'</button>
              </form>
            </div>
          </section>
        </div>

        <br><br>

        <!-- EXAMS -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">לוח מבחנים</h3>

        <div class="admin-columns">
          <!-- Z EXAMS -->
          <section class="admin-grade-section" data-grade="z">
            <div class="card">
              <h3>מבחנים · ז'</h3>
              <div id="admin-exams-z" class="admin-list"></div>

              <form id="exams-form-z" class="admin-form" data-grade="z">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />

                <label>שעת המבחן</label>
                <input type="time" name="time" />

                <label>מקצוע</label>
                <input name="subject" />

                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="z1">ז1</option>
                  <option value="z2">ז2</option>
                  <option value="z3">ז3</option>
                  <option value="z4">ז4</option>
                  <option value="z5">ז5</option>
                </select>

                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <button type="submit">הוסף מבחן לז'</button>
              </form>

            </div>
          </section>

          <!-- H EXAMS -->
          <section class="admin-grade-section" data-grade="h">
            <div class="card">
              <h3>מבחנים · ח'</h3>
              <div id="admin-exams-h" class="admin-list"></div>

              <form id="exams-form-h" class="admin-form" data-grade="h">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />

                <label>שעת המבחן</label>
                <input name="time" type="time" />

                <label>מקצוע</label>
                <input name="subject" />

                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="h1">ח1</option>
                  <option value="h2">ח2</option>
                  <option value="h3">ח3</option>
                  <option value="h4">ח4</option>
                  <option value="h5">ח5</option>
                  <option value="h6">ח6</option>
                </select>

                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <button type="submit">הוסף מבחן לח'</button>
              </form>
            </div>
          </section>

          <!-- T EXAMS -->
          <section class="admin-grade-section" data-grade="t">
            <div class="card">
              <h3>מבחנים · ט'</h3>
              <div id="admin-exams-t" class="admin-list"></div>

              <form id="exams-form-t" class="admin-form" data-grade="t">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />

                <label>שעת המבחן</label>
                <input name="time" type="time" />

                <label>מקצוע</label>
                <input name="subject" />

                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="t1">ט1</option>
                  <option value="t2">ט2</option>
                  <option value="t3">ט3</option>
                  <option value="t4">ט4</option>
                  <option value="t5">ט5</option>
                </select>

                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>

                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <button type="submit">הוסף מבחן לט'</button>
              </form>
            </div>
          </section>
        </div>

        <br><br>

        <!-- BOARD -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">לוח מודעות</h3>

        <div class="admin-columns">
          <div class="card">
            <h3>מודעות כלליות</h3>
            <div id="admin-board" class="admin-list"></div>

            <form id="board-form">
              <label>כותרת</label>
              <input name="title" />

              <label>מידע קצר (מי קהל היעד, תאריך וכו')</label>
              <input name="meta" />

              <label>צבע הטקסט (אופציונלי)</label>
              <input type="color" name="color" value="#ffffff" />

              <label>קישור לתמונה (אופציונלי)</label>
              <input name="imageUrl" placeholder="https://..." />

              <label>העלה קובץ תמונה (אופציונלי)</label>
              <input type="file" name="imageFile" accept="image/*" />

              <label>תוכן המודעה</label>
              <textarea name="body"></textarea>

              <button type="submit">הוסף מודעה</button>
            </form>
          </div>
        </div>

               <br><br>

        <!-- POLLS -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">סקרים לתלמידים</h3>
        <p class="section-subtitle">
          יצירת סקרים שיופיעו בדף "סקרים" באתר. כל סקר יכול להיות פעיל / לא פעיל.
        </p>

        <div class="admin-columns">
          <div class="card">
            <h3>ניהול סקרים</h3>

            <!-- טופס יצירת סקר -->
            <form id="poll-form" class="admin-form">
              <div class="admin-form-row">
                <label>שאלה לסקר</label>
                <input
                  type="text"
                  name="question"
                  placeholder="לדוגמה: מה אתם מעדיפים בבוקר — שיעור חופשי או פעילות חברתית?"
                  required
                />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 1</label>
                <input type="text" name="option1" placeholder="אפשרות 1" required />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 2</label>
                <input type="text" name="option2" placeholder="אפשרות 2" required />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 3 (לא חובה)</label>
                <input type="text" name="option3" placeholder="אפשרות 3" />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 4 (לא חובה)</label>
                <input type="text" name="option4" placeholder="אפשרות 4" />
              </div>

              <div class="admin-form-row">
                <label>
                  <input type="checkbox" name="isActive" checked />
                  הסקר פעיל (מופיע לתלמידים)
                </label>
              </div>

              <button type="submit" class="btn-primary">
                ➕ יצירת סקר
              </button>
            </form>

            <hr style="margin: 20px 0; opacity: 0.3;">

            <!-- רשימת סקרים קיימים -->
            <div id="admin-polls" class="admin-list">
              <p class="empty-msg">אין סקרים עדיין. לאחר יצירת סקר ראשון, הוא יופיע כאן.</p>
            </div>
          </div>
        </div>


        <!-- POLLS -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">סקרים לתלמידים</h3>
        <p class="section-subtitle">
          יצירת סקרים שיופיעו בדף "סקרים" ובסקר השבוע. ניתן לראות כמה הצביעו לכל אפשרות, להפעיל/להשבית סקר ולמחוק אותו.
        </p>

        <div class="admin-columns">
          <div class="card">
            <h3>ניהול סקרים</h3>

            <!-- טופס יצירת סקר -->
            <form id="poll-form" class="admin-form">
              <div class="admin-form-row">
                <label>שאלה לסקר</label>
                <input type="text" name="question" placeholder="לדוגמה: מה אתם מעדיפים בבוקר — שיעור חופשי או פעילות חברתית?" required />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 1</label>
                <input type="text" name="option1" placeholder="אפשרות 1" required />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 2</label>
                <input type="text" name="option2" placeholder="אפשרות 2" required />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 3 (לא חובה)</label>
                <input type="text" name="option3" placeholder="אפשרות 3" />
              </div>

              <div class="admin-form-row">
                <label>אפשרות 4 (לא חובה)</label>
                <input type="text" name="option4" placeholder="אפשרות 4" />
              </div>

              <div class="admin-form-row">
                <label>
                  <input type="checkbox" name="isActive" checked />
                  הסקר פעיל (מופיע לתלמידים)
                </label>
              </div>

              <button type="submit" class="btn-primary">
                ➕ יצירת סקר
              </button>
            </form>

            <hr style="margin: 20px 0; opacity: 0.3;">

            <!-- רשימת סקרים קיימים -->
            <div id="admin-polls" class="admin-list">
              <p class="empty-msg">אין סקרים עדיין. לאחר יצירת סקר ראשון, הוא יופיע כאן.</p>
            </div>
          </div>
        </div>

        <br><br>

        <!-- SITE CONTENT -->
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">ניהול תוכן האתר</h3>
        <p class="section-subtitle">
          כל השדות כאן נשמרים במסמך Firestore אחד (siteContent/main) ומוזנים לכל חלקי האתר.
        </p>

        <div class="admin-columns">
          <div class="card">
            <h3>טקסטים כלליים</h3>

            <form id="site-content-form" class="admin-form">
              <!-- HERO -->
              <h4>דף בית – אזור הירו (המשפטים הגדולים למעלה)</h4>

              <label>כותרת ראשית בהירו</label>
              <input name="homeHeroTitle" placeholder="ברוכים הבאים ליערת העמק" />

              <label>תת־כותרת בהירו</label>
              <input name="homeHeroSubtitle" placeholder="סביבת למידה בטוחה, תומכת ומובילה..." />

              <!-- HERO SIDE -->
              <h4 style="margin-top:16px;">תיבת "מידע מהיר" בהירו</h4>

              <label>כותרת התיבה</label>
              <input name="heroSideTitle" placeholder="מידע מהיר" />

              <label>שורות 'מידע מהיר' (כל שורה – שורה בנפרד ברשימה)</label>
              <textarea
                name="heroSideList"
                rows="3"
                placeholder="📍 מגדל העמק&#10;🧑‍🎓 שכבות ז'–ט'&#10;👩‍🏫 צוות חינוכי מסור&#10;🤝 שיתופי פעולה קהילתיים"
              ></textarea>

              <!-- ABOUT -->
              <h4 style="margin-top:16px;">אודות בית הספר</h4>

              <label>כותרת אודות</label>
              <input name="aboutTitle" placeholder="אודות בית הספר יערת העמק" />

              <label>טקסט אודות</label>
              <textarea name="aboutBody" rows="4" placeholder="כמה משפטים על בית הספר, הערכים, האווירה..."></textarea>

              <!-- IMPORTANT SECTION -->
              <h4 style="margin-top:16px;">מדור "חשוב לדעת"</h4>

              <label>כותרת המדור</label>
              <input name="importantTitle" placeholder="חשוב לדעת" />

              <label>תת־כותרת המדור</label>
              <input name="importantSubtitle" placeholder="כמה דברים שימושיים לתלמידים – לפני שממשיכים לגלול." />

              <h5 style="margin-top:10px;">כרטיס 1</h5>
              <label>כותרת כרטיס 1</label>
              <input name="importantCard1Title" placeholder="לדוגמה: 💻 סביבת למידה דיגיטלית" />

              <label>טקסט כרטיס 1</label>
              <textarea name="importantCard1Body" rows="2"></textarea>

              <h5 style="margin-top:10px;">כרטיס 2</h5>
              <label>כותרת כרטיס 2</label>
              <input name="importantCard2Title" placeholder="לדוגמה: 🤝 עם מי מדברים?" />

              <label>טקסט כרטיס 2</label>
              <textarea name="importantCard2Body" rows="2"></textarea>

              <h5 style="margin-top:10px;">כרטיס 3</h5>
              <label>כותרת כרטיס 3</label>
              <input name="importantCard3Title" placeholder="לדוגמה: 📌 טיפ נוסף" />

              <label>טקסט כרטיס 3</label>
              <textarea name="importantCard3Body" rows="2"></textarea>

              <!-- HOME SECTIONS TITLES -->
              <h4 style="margin-top:16px;">כותרות למדורי דף הבית</h4>

              <label>כותרת מדור חדשות</label>
              <input name="homeNewsTitle" placeholder="חדשות אחרונות" />

              <label>תת־כותרת מדור חדשות</label>
              <input name="homeNewsSubtitle" placeholder="שלושת העדכונים האחרונים מכל שכבה – ישר מול העיניים של התלמידים." />

              <label>כותרת מדור לוח מודעות</label>
              <input name="boardTitle" placeholder="לוח מודעות" />

              <label>תת־כותרת מדור לוח מודעות</label>
              <input name="boardSubtitle" placeholder="הודעות חשובות, פעילויות ואירועים לבית הספר." />

              <label>כותרת מדור מבחנים</label>
              <input name="homeExamsTitle" placeholder="מבחנים קרובים" />

              <label>תת־כותרת מדור מבחנים</label>
              <input name="homeExamsSubtitle" placeholder="תאריכים, מקצועות ונושאים – כדי שאף אחד לא יפספס." />

              <!-- GRADES SECTION -->
              <h4 style="margin-top:16px;">מדור "היכרות עם השכבות"</h4>

              <label>כותרת המדור</label>
              <input name="gradesSectionTitle" placeholder="היכרות עם השכבות" />

              <label>תת־כותרת המדור</label>
              <input name="gradesSectionSubtitle" placeholder="בחר שכבה כדי לראות חדשות, מבחנים ועדכונים שמתאימים אליך." />

              <h5 style="margin-top:10px;">תיאור שכבות</h5>
              <label>תיאור שכבת ז'</label>
              <textarea name="zDescription" rows="2" placeholder="משפט על שכבת ז'..."></textarea>

              <label>תיאור שכבת ח'</label>
              <textarea name="hDescription" rows="2" placeholder="משפט על שכבת ח'..."></textarea>

              <label>תיאור שכבת ט'</label>
              <textarea name="tDescription" rows="2" placeholder="משפט על שכבת ט'..."></textarea>

              <!-- REQUESTS -->
              <h4 style="margin-top:16px;">תיבת בקשות</h4>

              <label>כותרת המדור</label>
              <input name="requestsTitle" placeholder="תיבת בקשות" />

              <label>תת־כותרת</label>
              <input name="requestsSubtitle" placeholder="רוצים לבקש משהו? יש רעיון?" />

              <label>טקסט מעל הכפתור</label>
              <textarea name="requestsBody" rows="2" placeholder="למילוי טופס הבקשות – לחצו כאן:"></textarea>

              <!-- CONTACT -->
              <h4 style="margin-top:16px;">יצירת קשר</h4>

              <label>כותרת המדור</label>
              <input name="contactSectionTitle" placeholder="יצירת קשר" />

              <label>תת־כותרת המדור</label>
              <input name="contactSectionSubtitle" placeholder="ניתן לפנות אלינו בכל שאלה, בקשה או התייעצות." />

              <label>טלפון</label>
              <input name="contactPhone" placeholder="04-XXXXXXX" />

              <label>אימייל</label>
              <input name="contactEmail" placeholder="school@example.com" />

              <label>כתובת</label>
              <input name="contactAddress" placeholder="רחוב..., מגדל העמק" />

              <!-- FOOTER -->
              <h4 style="margin-top:16px;">פוטר</h4>

              <label>טקסט תחתון (פוטר)</label>
              <input name="footerText" placeholder="© כל הזכויות שמורות לבית ספר יערת העמק" />

              <button type="submit" style="margin-top:16px;">שמור תוכן אתר</button>
            </form>
          </div>
        </div>

      </div> <!-- /#admin-section -->
    </div> <!-- /.container -->
  </section>

  <script type="module" src="admin.js"></script>
  <script src="accessibility.js"></script>
</body>
</html>
