<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>לוח ניהול – יערת העמק</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="admin.css" />

  <!-- ADMIN THEME (ONLY ADMIN) -->
  <script>
    (function () {
      try {
        const key = "admin_theme";
        const saved = localStorage.getItem(key);
        const theme = saved || "dark";
        document.documentElement.setAttribute("data-theme", theme);
      } catch {}
    })();
  </script>

  <style>
/* =========================
   ADMIN – CLEAN TOP BAR (DARK ONLY)
   ========================= */

/* רקע עמוד אדמין */
body.admin-page{
  background:
    radial-gradient(1200px 600px at 50% -10%, rgba(56,189,248,.18), transparent 60%),
    linear-gradient(180deg, #020617, #020617);
  color: #e3f2fd;
}

/* container רחב */
body.admin-page .container{
  max-width: 1400px !important;
  width: min(1400px, calc(100% - 40px)) !important;
  margin-inline: auto !important;
}

/* HEADER */
body.admin-page .header-main{
  position: sticky;
  top: 0;
  z-index: 9999;
  background: rgba(2,6,23,.75);
  border-bottom: 1px solid rgba(148,163,184,.18);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* NAV STRUCTURE */
body.admin-page .admin-nav{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 18px;
  padding: 12px 0;
}

/* LEFT = LOGO */
body.admin-page .admin-nav-left{
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

body.admin-page .logo-circle{
  width: 54px;
  height: 54px;
  border-radius: 999px;
  overflow: hidden;
  border: 2px solid rgba(56,189,248,.35);
  background: rgba(15,23,42,.55);
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  display: flex;
  align-items: center;
  justify-content: center;
}
body.admin-page .logo-img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* RIGHT = BUTTONS */
body.admin-page .admin-nav-right{
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  flex-wrap: wrap;
}

/* BUTTON LOOK */
body.admin-page .admin-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 8px 16px;
  border-radius: 999px;

  font-size: .95rem;
  font-weight: 800;
  text-decoration: none;
  white-space: nowrap;

  color: #e5e7eb;
  background: rgba(15,23,42,.55);
  border: 1px solid rgba(148,163,184,.28);

  box-shadow: 0 10px 26px rgba(0,0,0,.25);
  transition: transform .15s ease, box-shadow .15s ease, background .2s ease, border-color .2s ease;
}

body.admin-page .admin-btn:hover{
  transform: translateY(-1px);
  background: rgba(15,23,42,.78);
  border-color: rgba(96,165,250,.55);
  box-shadow: 0 14px 34px rgba(0,0,0,.35);
}

/* ACTIVE */
body.admin-page .admin-btn.active{
  background: linear-gradient(135deg,#2563eb,#38bdf8);
  color: #fff;
  border-color: rgba(56,189,248,.55);
  box-shadow: 0 14px 42px rgba(37,99,235,.55);
}

/* ✅ המרחק שאתה רוצה: כפתורים רחוקים מהלוגו */
body.admin-page .admin-nav-right{
  margin-inline-start: 42px; /* ב-RTL זה יוצר רווח מהלוגו */
}

/* MOBILE */
@media (max-width: 900px){
  body.admin-page .admin-nav{
    gap: 12px;
  }
  body.admin-page .logo-circle{
    width: 48px;
    height: 48px;
  }
  body.admin-page .admin-btn{
    padding: 8px 12px;
    font-size: .9rem;
  }
  body.admin-page .admin-nav-right{
    margin-inline-start: 18px;
  }
}

/* =========================
   ADMIN COLUMNS (כמו שהיה)
   ========================= */
.admin-columns{
  display: grid !important;
  gap: 18px;
  align-items: start;
  margin-top: 10px;
}
@media (min-width: 1100px){
  .admin-columns{ grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
}
@media (min-width: 700px) and (max-width: 1099px){
  .admin-columns{ grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}
@media (max-width: 699px){
  .admin-columns{ grid-template-columns: 1fr !important; }
}
.admin-grade-section,
.admin-columns > section,
.admin-columns > .card{
  min-width: 0 !important;
}

/* LIST/IMAGES */
.admin-list .admin-item{
  padding: 8px 10px;
  margin-bottom: 8px;
  border-radius: 12px;
}
.admin-images-row{
  display: flex;
  gap: 6px;
  margin-top: 4px;
  flex-wrap: wrap;
}
.admin-image-wrapper{
  width: 90px;
  height: 70px;
  flex: 0 0 auto;
  overflow: hidden;
  border-radius: 8px;
}
.admin-image-wrapper img.admin-image{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.admin-item-body{
  font-size: 0.9rem;
  line-height: 1.45;
  max-height: 6.5em;
  overflow-y: auto;
}
.admin-class-title{
  font-size: 0.95rem;
  margin-top: 10px;
  margin-bottom: 4px;
  opacity: 0.9;
}
.admin-exam-item{
  border-radius: 10px;
  padding: 6px 8px;
  margin-bottom: 6px;
}
/* ===== AUTH LINKS (LOGIN) ===== */
.auth-links{
  margin-top: 14px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  font-size: .9rem;
}

.auth-links a{
  color: #93c5fd;
  text-decoration: none;
  font-weight: 700;
  padding: 4px 6px;
  border-radius: 6px;
  transition: color .15s ease, background .15s ease;
}

.auth-links a:hover{
  color: #bfdbfe;
  background: rgba(59,130,246,.15);
}

.auth-links .divider{
  color: rgba(148,163,184,.5);
  font-weight: 700;
}

.reset-hint{
  margin-top: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  font-size: 0.85rem;
  font-weight: 600;
  color: #93c5fd; /* כחול עדין */
  opacity: 0.9;
}

.reset-hint .dot{
  color: #60a5fa;
  font-weight: 900;
}

.reset-hint span{
  cursor: default;
}

/* אם אחד מהם קישור */
.reset-hint a{
  color: #38bdf8;
  text-decoration: none;
  transition: color .15s ease, text-shadow .15s ease;
}

.reset-hint a:hover{
  color: #7dd3fc;
  text-shadow: 0 0 6px rgba(56,189,248,.6);
}
/* =========================
   LOGIN LINKS (שכחתי סיסמה • בקשת הרשמה)
   ========================= */

.login-links{
  margin-top: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;

  font-size: 0.85rem;
  font-weight: 600;
  color: #93c5fd;
}

.login-links a{
  color: #38bdf8;
  text-decoration: none;
  position: relative;
  transition:
    color .15s ease,
    text-shadow .15s ease;
}

/* underline עדין בהובר */
.login-links a::after{
  content: "";
  position: absolute;
  left: 50%;
  bottom: -2px;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg,#38bdf8,#2563eb);
  border-radius: 2px;
  transform: translateX(-50%);
  transition: width .2s ease;
}

.login-links a:hover{
  color: #7dd3fc;
  text-shadow: 0 0 6px rgba(56,189,248,.55);
}

.login-links a:hover::after{
  width: 100%;
}

/* הנקודה באמצע */
.login-links .dot{
  color: #60a5fa;
  font-weight: 900;
  opacity: 0.8;
  cursor: default;
}
/* =========================
   ADMIN NAV – MOBILE FIX
   put at VERY END
   ========================= */

.admin-mobile-toggle,
.admin-mobile-menu{ display:none; }

@media (max-width: 900px){

  /* מסתירים את שני הצדדים הרגילים של הניווט במובייל */
  body.admin-page .nav-right-links,
  body.admin-page .nav-left-links,
  body.admin-page .admin-nav-right,
  body.admin-page .admin-nav-left{
    display:none !important;
  }

  /* nav נשאר עם הלוגו במרכז */
  body.admin-page .nav.nav-centered{
    justify-content:center !important;
    min-height:72px;
    position:relative;
    padding: 10px 0;
  }

  /* כפתור המבורגר */
  .admin-mobile-toggle{
    display:flex;
    position:absolute;
    right:12px;   /* RTL */
    top:50%;
    transform: translateY(-50%);
    width:44px;
    height:44px;
    border-radius: 14px;
    border: 1px solid rgba(148,163,184,.28);
    background: rgba(2,6,23,.45);
    backdrop-filter: blur(10px);
    align-items:center;
    justify-content:center;
    gap:4px;
    cursor:pointer;
  }

  .admin-mobile-toggle span{
    display:block;
    width:20px;
    height:2px;
    background: rgba(226,232,240,.9);
    border-radius: 3px;
  }

  /* תפריט נפתח */
  .admin-mobile-menu{
    display:none;
    position:absolute;
    top: calc(100% + 10px);
    right: 12px; /* RTL */
    width: min(260px, calc(100vw - 24px));
    padding: 10px;
    border-radius: 18px;
    background: rgba(2,6,23,.88);
    border: 1px solid rgba(148,163,184,.22);
    box-shadow: 0 22px 55px rgba(0,0,0,.45);
    backdrop-filter: blur(12px);
    z-index: 9999;
  }

  .admin-mobile-menu.open{ display:block; }

  .admin-mobile-menu a{
    display:flex;
    width:100%;
    justify-content:center;
    padding: 10px 12px;
    margin: 8px 0;
    border-radius: 999px;
    text-decoration:none;
    font-weight: 900;
    color: #e5e7eb;
    background: rgba(15,23,42,.55);
    border: 1px solid rgba(148,163,184,.20);
  }

  .admin-mobile-menu a:hover{
    background: rgba(15,23,42,.75);
  }
}
/* =========================
   ADMIN MOBILE MENU – FIXED
   ========================= */
@media (max-width: 900px){

  /* כפתור ההמבורגר */
  .admin-mobile-toggle{
    display:flex;
    position:absolute;
    right:12px;
    top:50%;
    transform: translateY(-50%);
    width:44px;
    height:44px;
    border-radius: 14px;
    border: 1px solid rgba(148,163,184,.25);
    background: rgba(2,6,23,.55);
    backdrop-filter: blur(12px);
    align-items:center;
    justify-content:center;
    gap:4px;
    cursor:pointer;
    z-index: 10000;
  }
  .admin-mobile-toggle span{
    display:block;
    width:20px;
    height:2px;
    background: rgba(226,232,240,.92);
    border-radius: 3px;
  }

  /* שכבת רקע כהה (כדי שירגיש מודאל) */
  .admin-mobile-backdrop{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.45);
    backdrop-filter: blur(2px);
    z-index: 9998;
    display:none;
  }
  .admin-mobile-backdrop.open{ display:block; }

  /* התפריט עצמו – קטן, לא חונק */
  .admin-mobile-menu{
    position: fixed;
    top: 72px;        /* מתחת לניווט */
    right: 12px;
    left: 12px;
    max-width: 420px;
    margin-left: auto; /* RTL */
    padding: 12px;
    border-radius: 18px;

    background: rgba(2,6,23,.92);
    border: 1px solid rgba(148,163,184,.18);
    box-shadow: 0 22px 55px rgba(0,0,0,.55);
    backdrop-filter: blur(14px);

    display:none;
    z-index: 9999;

    /* ✅ גובה מוגבל + סקрол פנימי */
    max-height: min(60vh, 520px);
    overflow: auto;
  }
  .admin-mobile-menu.open{ display:block; }

  /* כותרת + כפתור X */
  .admin-mobile-menu .menu-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 6px 4px 12px;
    border-bottom: 1px solid rgba(148,163,184,.12);
    margin-bottom: 10px;
  }
  .admin-mobile-menu .menu-title{
    font-weight: 900;
    color:#e5e7eb;
    opacity:.95;
  }
  .admin-mobile-menu .menu-close{
    width:38px;height:38px;
    border-radius: 12px;
    border: 1px solid rgba(148,163,184,.18);
    background: rgba(15,23,42,.55);
    color:#e5e7eb;
    cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    font-size: 18px;
  }

  /* כפתורים – קומפקטיים, לא ענקיים */
  .admin-mobile-menu a{
    display:flex;
    align-items:center;
    justify-content:center;

    padding: 10px 12px;
    margin: 8px 0;

    border-radius: 14px;
    text-decoration:none;
    font-weight: 900;
    font-size: 0.98rem;

    color: #e5e7eb;
    background: rgba(15,23,42,.55);
    border: 1px solid rgba(148,163,184,.16);
  }
  .admin-mobile-menu a:active{
    transform: scale(.98);
  }

  /* ACTIVE (אם יש לך class active) */
  .admin-mobile-menu a.active,
  .admin-mobile-menu a.is-active{
    background: linear-gradient(135deg,#2563eb,#38bdf8);
    border-color: rgba(56,189,248,.45);
    color:#fff;
  }
}
/* =========================
   ADMIN NAV – MOBILE FIX
   put at VERY END
   ========================= */

/* ננעל על ה-nav שלא יעשה wrap */
body.admin-page .nav.nav-centered{
  flex-wrap: nowrap;
}

/* נוודא שהצדדים לא נשברים */
body.admin-page .nav-side{
  flex-wrap: nowrap;
}

/* ===== Mobile layout ===== */
@media (max-width: 900px){

  /* מסתירים את הכפתורים הרגילים במובייל */
  body.admin-page .nav-right-links,
  body.admin-page .nav-left-links{
    display: none !important;
  }

  /* מרכזים את הלוגו */
  body.admin-page .nav.nav-centered{
    justify-content: center !important;
    padding: 12px 0 !important;
    min-height: 72px;
    position: relative;
  }

  body.admin-page .nav-center{
    position: relative;
    z-index: 5;
  }

  /* כפתור המבורגר */
  body.admin-page .nav-toggle{
    display: inline-flex !important;
    position: absolute;
    left: 14px;              /* לוגו באמצע, המבורגר בצד שמאל (כמו בתמונה שלך) */
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    border-radius: 14px;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(148,163,184,0.28);
    background: rgba(2,6,23,0.55);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 14px 40px rgba(0,0,0,0.35);
    cursor: pointer;
    z-index: 9999;
  }

  body.admin-page .nav-toggle span{
    display:block;
    width: 22px;
    height: 2px;
    background: #e5e7eb;
    border-radius: 2px;
  }
  body.admin-page .nav-toggle span + span{ margin-top: 5px; }

  /* תפריט נפתח */
  body.admin-page #nav-mobile.nav-mobile{
    display: none;
    position: absolute;
    top: calc(100% + 10px);
    left: 12px;
    width: min(260px, calc(100% - 24px));
    padding: 10px;
    border-radius: 18px;
    background: rgba(2,6,23,0.92);
    border: 1px solid rgba(148,163,184,0.25);
    box-shadow: 0 20px 55px rgba(0,0,0,0.45);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    z-index: 9999;
  }

  body.admin-page #nav-mobile.nav-mobile.open{
    display: block;
  }

  body.admin-page #nav-mobile.nav-mobile a{
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 12px;
    margin: 8px 0;
    border-radius: 14px;
    font-weight: 800;
    text-decoration: none;
    color: #e5e7eb;
    background: rgba(15,23,42,0.55);
    border: 1px solid rgba(148,163,184,0.22);
    transition: transform .15s ease, background .15s ease;
  }

  body.admin-page #nav-mobile.nav-mobile a:hover{
    transform: translateY(-1px);
    background: rgba(15,23,42,0.75);
  }

  /* active */
  body.admin-page #nav-mobile.nav-mobile a.admin-active,
  body.admin-page #nav-mobile.nav-mobile a.is-active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    border-color: rgba(56,189,248,.55) !important;
    color: #fff !important;
  }
}
/* =========================
   ADMIN – MOBILE NAV FIX
   put at VERY END
   ========================= */

body.admin-page .header-main{
  padding-inline: 12px;
}

/* בסיס */
body.admin-page .nav.nav-centered{
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
  padding: 10px 0;
  gap: 12px;
}

/* צדדים */
body.admin-page .nav-side{
  display:flex;
  align-items:center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

/* הלוגו תמיד במרכז */
body.admin-page .nav-center{
  flex: 0 0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* דסקטופ – רגיל */
@media (min-width: 901px){
  body.admin-page .nav-toggle{ display:none !important; }
  body.admin-page #nav-mobile{ display:none !important; }
}

/* מובייל – המבורגר + לוגו באמצע, מסתיר לינקים גדולים */
@media (max-width: 900px){
  body.admin-page .nav-right-links,
  body.admin-page .nav-left-links{
    display:none !important;
  }

  body.admin-page .nav.nav-centered{
    justify-content:center;
    min-height: 72px;
  }

  /* המבורגר בצד */
  body.admin-page .nav-toggle{
    display:flex !important;
    position:absolute;
    left: 12px;
    top:50%;
    transform: translateY(-50%);
    flex-direction:column;
    gap:5px;
    background: none;
    border: 0;
    cursor:pointer;
    z-index: 10000;
  }
  body.admin-page .nav-toggle span{
    width: 24px;
    height: 2px;
    border-radius: 2px;
    background: #e5e7eb;
    opacity: .95;
  }

  /* תפריט נפתח מתחת לטופבר */
  body.admin-page #nav-mobile.nav-mobile{
    display:none;
    position:absolute;
    top: calc(100% + 10px);
    left: 12px;
    width: min(260px, calc(100vw - 24px));
    padding: 10px;
    border-radius: 18px;
    background: rgba(2,6,23,.92);
    border: 1px solid rgba(148,163,184,.28);
    box-shadow: 0 22px 60px rgba(0,0,0,.40);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    z-index: 10000;
  }
  body.admin-page #nav-mobile.nav-mobile.open{ display:block; }

  body.admin-page #nav-mobile.nav-mobile a{
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 12px 12px;
    margin: 8px 0;
    border-radius: 14px;
    text-decoration:none;
    font-weight: 800;
    color: #e5e7eb;
    background: rgba(15,23,42,.55);
    border: 1px solid rgba(148,163,184,.25);
  }
  body.admin-page #nav-mobile.nav-mobile a:hover{
    background: rgba(30,64,175,.55);
    border-color: rgba(96,165,250,.55);
  }

  /* active */
  body.admin-page #nav-mobile.nav-mobile a.admin-active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    color:#fff !important;
    border-color: rgba(56,189,248,.55) !important;
  }
}
/* =========================
   ADMIN – MOBILE LAYOUT FIX
   ========================= */

body.admin-page .container{
  width: min(1200px, calc(100% - 24px)) !important;
  margin-inline: auto !important;
}

/* למנוע overflow שחותך עמודים */
body.admin-page,
body.admin-page .container,
body.admin-page .card{
  overflow-x: hidden;
}

@media (max-width: 900px){
  /* כרטיסים נורמליים */
  body.admin-page .card{
    padding: 14px !important;
    border-radius: 18px !important;
  }

  /* כל הגרידים לטור אחד */
  body.admin-page .admin-columns{
    grid-template-columns: 1fr !important;
    gap: 14px !important;
  }

  /* שלא יהיה מצב ששדה “בורח” */
  body.admin-page input,
  body.admin-page select,
  body.admin-page textarea,
  body.admin-page button{
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* כפתורי העלאת קובץ שלא ידחפו דברים */
  body.admin-page .admin-images-row,
  body.admin-page .admin-item,
  body.admin-page .admin-form{
    min-width: 0 !important;
  }
}
/* =========================
   ADMIN MOBILE MENU – CLEAN
   put at VERY END
   ========================= */

@media (max-width: 900px){

  /* המבורגר תמיד שמאל */
  body.admin-page .nav-toggle{
    left: 12px !important;
    right: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 20000 !important;
  }

  /* תפריט נפתח בשמאל מתחת לטופבר */
  body.admin-page #nav-mobile.nav-mobile{
    left: 12px !important;
    right: auto !important;
    top: calc(100% + 10px) !important;

    width: min(250px, calc(100vw - 24px)) !important;
    padding: 10px !important;

    border-radius: 18px !important;
    background: rgba(2,6,23,.92) !important;
    border: 1px solid rgba(148,163,184,.28) !important;
    box-shadow: 0 22px 60px rgba(0,0,0,.45) !important;

    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  /* רשימה – לא “כפתורים ענקיים” */
  body.admin-page #nav-mobile.nav-mobile a{
    display:flex !important;
    align-items:center !important;
    justify-content:flex-start !important;   /* יישור יפה (RTL עדיין עובד) */
    gap: 10px !important;

    padding: 10px 12px !important;
    margin: 8px 0 !important;

    border-radius: 14px !important;
    font-weight: 800 !important;
    font-size: 0.95rem !important;

    color: #e5e7eb !important;
    background: rgba(15,23,42,.55) !important;
    border: 1px solid rgba(148,163,184,.25) !important;

    box-shadow: none !important;
    transform: none !important;
    text-decoration: none !important;
  }

  body.admin-page #nav-mobile.nav-mobile a:hover{
    background: rgba(30,64,175,.55) !important;
    border-color: rgba(96,165,250,.55) !important;
  }

  /* active */
  body.admin-page #nav-mobile.nav-mobile a.admin-active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    color:#fff !important;
    border-color: rgba(56,189,248,.55) !important;
  }

  /* לסגור שהטופבר לא ידחוף דברים מוזר */
  body.admin-page .nav.nav-centered{
    position: relative !important;
  }
}
/* =========================
   MOBILE NAV: style ONLY the NAV links
   ========================= */
@media (max-width: 900px){
  /* רק לינקים שבתוך nav-mobile שהם ניווט */
  body.admin-page #nav-mobile a.nav-link{
    display:flex !important;
    align-items:center !important;
    justify-content:flex-start !important;
    padding: 10px 12px !important;
    margin: 8px 0 !important;
    border-radius: 14px !important;
    font-weight: 800 !important;
    font-size: 0.95rem !important;
    color: #e5e7eb !important;
    background: rgba(15,23,42,.55) !important;
    border: 1px solid rgba(148,163,184,.25) !important;
    text-decoration: none !important;
  }

  body.admin-page #nav-mobile a.nav-link:hover{
    background: rgba(30,64,175,.55) !important;
    border-color: rgba(96,165,250,.55) !important;
  }

  body.admin-page #nav-mobile a.nav-link.admin-active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    color:#fff !important;
    border-color: rgba(56,189,248,.55) !important;
  }
}
/* =========================
   GRADE FILTER – MOBILE ROW
   ========================= */
@media (max-width: 900px){
  .grade-filters{
    display:flex !important;
    gap: 8px !important;
    overflow-x: auto !important;
    padding: 8px 12px !important;
    margin: 10px 0 6px !important;
    -webkit-overflow-scrolling: touch;
  }

  .grade-filter-btn{
    flex: 0 0 auto !important;
    padding: 8px 12px !important;
    border-radius: 999px !important;
    font-size: .9rem !important;
    font-weight: 800 !important;
    background: rgba(15,23,42,.55) !important;
    color:#e5e7eb !important;
    border: 1px solid rgba(148,163,184,.25) !important;
  }

  .grade-filter-btn.active{
    background: linear-gradient(135deg,#22c55e,#38bdf8) !important;
    color:#041015 !important;
    border-color: rgba(56,189,248,.55) !important;
  }
}
/* =========================
   ADMIN MOBILE MENU (ONLY .admin-btn)
   ========================= */
@media (max-width: 900px){

  /* הכפתור (המבורגר) – בצד שמאל */
  body.admin-page .nav-toggle{
    left: 12px !important;
    right: auto !important;
  }

  /* הקופסה של התפריט שנפתח */
  body.admin-page #nav-mobile.nav-mobile{
    width: min(260px, calc(100% - 24px)) !important;
    left: 12px !important;
    right: auto !important;
    padding: 10px !important;
    border-radius: 18px !important;
    background: rgba(2,6,23,.92) !important;
    border: 1px solid rgba(148,163,184,.25) !important;
    box-shadow: 0 18px 55px rgba(0,0,0,.45) !important;
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  /* לא לעצב כל a בעולם — רק כפתורים של התפריט */
  body.admin-page #nav-mobile.nav-mobile a{
    all: unset;
    box-sizing: border-box;
  }

  body.admin-page #nav-mobile.nav-mobile a.admin-btn{
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    width: 100% !important;

    padding: 12px 12px !important;
    margin: 8px 0 !important;
    border-radius: 14px !important;

    font-weight: 800 !important;
    font-size: 1rem !important;
    color: #e5e7eb !important;

    background: rgba(15,23,42,.55) !important;
    border: 1px solid rgba(148,163,184,.22) !important;
    text-decoration: none !important;
    box-shadow: 0 10px 26px rgba(0,0,0,.28) !important;

    transform: none !important;
  }

  body.admin-page #nav-mobile.nav-mobile a.admin-btn:hover{
    background: rgba(30,64,175,.55) !important;
    border-color: rgba(96,165,250,.55) !important;
  }

  body.admin-page #nav-mobile.nav-mobile a.admin-btn.active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    color: #fff !important;
    border-color: rgba(56,189,248,.55) !important;
    box-shadow: 0 14px 35px rgba(37,99,235,.45) !important;
  }
}
/* =========================
   ADMIN MOBILE TOPBAR LAYOUT
   right: grades | center: logo | left: hamburger
   ========================= */
@media (max-width: 900px){

  /* הטופבר עצמו */
  body.admin-page .nav.nav-centered{
    position: relative;
    min-height: 72px;
    padding: 10px 0;
    justify-content: center !important;
  }

  /* הסמל באמצע */
  body.admin-page .nav-center{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    margin: 0 !important;
  }

  /* המבורגר בצד שמאל */
  body.admin-page .nav-toggle{
    position: absolute !important;
    left: 12px !important;
    right: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 10001;
  }

  /* “השכבות” בצד ימין (קטן) */
  body.admin-page .admin-grade-filters{
    position: absolute !important;
    right: 12px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;

    display: flex !important;
    gap: 8px !important;
    align-items: center !important;

    max-width: 44vw;           /* שלא יתפוצץ */
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    z-index: 10001;
  }
  body.admin-page .admin-grade-filters::-webkit-scrollbar{ display:none; }

  /* כפתורי שכבות קטנים יותר */
  body.admin-page .admin-grade-filters .grade-filter-btn{
    padding: 7px 10px !important;
    font-size: .85rem !important;
    border-radius: 999px !important;
    white-space: nowrap;
  }

  /* אם יש לך גם "כל השכבות" — להקטין עוד טיפה */
  body.admin-page .admin-grade-filters .grade-filter-btn[data-grade="all"]{
    padding: 7px 12px !important;
    font-weight: 900;
  }

  /* התפריט שנפתח מהמבורגר – ייפתח משמאל */
  body.admin-page #nav-mobile.nav-mobile{
    left: 12px !important;
    right: auto !important;
  }
}
/* =========================================================
   FINAL MOBILE LOCK (put LAST): left hamburger | center logo | right grades
   Works with your CURRENT HTML (admin-mobile-toggle + admin-mobile-menu + admin-grade-switcher)
   ========================================================= */
@media (max-width: 900px){

  /* 1) נועלים שה-header הוא ה"אבא" של הכל */
  body.admin-page .header-main{ position: sticky; top:0; z-index: 20000; }
  body.admin-page .admin-nav{ position: relative; min-height: 72px; padding: 10px 0; }

  /* 2) מציגים לוגו במרכז (מה שיש לך: .admin-nav-left עם הלוגו) */
  body.admin-page .admin-nav-left{
    display:flex !important;
    position:absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    z-index: 20002 !important;
  }

  /* 3) המבורגר בשמאל (מה שיש לך: .admin-mobile-toggle) */
  body.admin-page .admin-mobile-toggle{
    display:flex !important;
    position:absolute !important;
    left: 12px !important;
    right: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 20003 !important;

    width: 44px !important;
    height: 44px !important;
    border-radius: 14px !important;
    border: 1px solid rgba(148,163,184,.25) !important;
    background: rgba(2,6,23,.55) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    align-items:center !important;
    justify-content:center !important;
    gap:4px !important;
  }
  body.admin-page .admin-mobile-toggle span{
    display:block !important;
    width: 20px !important;
    height: 2px !important;
    background: rgba(226,232,240,.92) !important;
    border-radius: 3px !important;
  }

  /* 4) מסתירים את התפריט דסקטופ (שלא ישבור) */
  body.admin-page .admin-nav-right{ display:none !important; }

  /* 5) התפריט שנפתח (admin-mobile-menu) ייפתח משמאל ולא באמצע */
  body.admin-page .admin-mobile-menu{
    position: fixed !important;
    top: 76px !important;
    left: 12px !important;
    right: auto !important;

    width: min(280px, calc(100vw - 24px)) !important;
    max-height: min(60vh, 520px) !important;
    overflow: auto !important;

    padding: 12px !important;
    border-radius: 18px !important;
    background: rgba(2,6,23,.92) !important;
    border: 1px solid rgba(148,163,184,.18) !important;
    box-shadow: 0 22px 55px rgba(0,0,0,.55) !important;
    backdrop-filter: blur(14px) !important;
    -webkit-backdrop-filter: blur(14px) !important;

    display:none !important;
    z-index: 20010 !important;
  }
  body.admin-page .admin-mobile-menu.open{ display:block !important; }

  /* כפתורים בתוך התפריט */
  body.admin-page .admin-mobile-menu a.admin-btn{
    display:flex !important;
    align-items:center !important;
    justify-content:flex-start !important;
    width:100% !important;

    padding: 12px 12px !important;
    margin: 8px 0 !important;

    border-radius: 14px !important;
    font-weight: 900 !important;
    font-size: 1rem !important;
    color:#e5e7eb !important;
    text-decoration:none !important;

    background: rgba(15,23,42,.55) !important;
    border: 1px solid rgba(148,163,184,.16) !important;
    box-shadow: none !important;
  }
  body.admin-page .admin-mobile-menu a.admin-btn.active{
    background: linear-gradient(135deg,#2563eb,#38bdf8) !important;
    border-color: rgba(56,189,248,.45) !important;
    color:#fff !important;
  }

  /* 6) השכבות — ימין למעלה קטן (מה שיש לך: .admin-grade-switcher) */
  body.admin-page .admin-grade-switcher{
    position: absolute !important;
    right: 12px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 20003 !important;

    display:flex !important;
    align-items:center !important;
    gap: 8px !important;

    max-width: 46vw !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: none !important;

    padding: 0 !important;
    margin: 0 !important;
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
  }
  body.admin-page .admin-grade-switcher::-webkit-scrollbar{ display:none; }

  body.admin-page .admin-grade-switcher .grade-filter-btn{
    all: unset;
    box-sizing: border-box;

    display:inline-flex !important;
    align-items:center !important;
    justify-content:center !important;

    padding: 7px 10px !important;
    border-radius: 999px !important;
    font-size: .82rem !important;
    font-weight: 900 !important;
    line-height: 1 !important;
    white-space: nowrap !important;
    cursor: pointer !important;

    background: rgba(15,23,42,.55) !important;
    color: #e5e7eb !important;
    border: 1px solid rgba(148,163,184,.22) !important;
  }
  body.admin-page .admin-grade-switcher .grade-filter-btn.active{
    background: linear-gradient(135deg,#22c55e,#38bdf8) !important;
    color: #06121f !important;
    border-color: rgba(56,189,248,.45) !important;
  }

  /* 7) מבטלים כל "גרייד פילטר" אחר שיש לך כדי שלא יריב */
  body.admin-page .grade-filters,
  body.admin-page .admin-grade-filters{
    display:none !important;
  }
}
@media (max-width: 600px){
  body.admin-page .admin-grade-switcher{
    top: 18px !important;      /* במקום 50% */
    transform: none !important; /* שלא ימשוך לאמצע */
  }
}
/* כשמציגים שכבה אחת בלבד – שתרחיב לרוחב מלא */
.admin-columns.one-visible{
  grid-template-columns: 1fr !important;
}
.admin-columns.one-visible > .admin-grade-section{
  grid-column: 1 / -1 !important;
}

  </style>
</head>

<body class="admin-page" data-page="admin">

  <script type="module" src="analytics.js"></script>

  <!-- ✅ HEADER: EXACT STRUCTURE LIKE INDEX -->
<header class="header-main">
  <div class="container">
    <div class="admin-nav">

      <div class="admin-nav-left">
        <a href="index.html" class="logo-circle" aria-label="דף הבית">
          <img src="https://i.ibb.co/tp4K737Y/Cropped-circle-image-1.png" class="logo-img" alt="סמל יערת העמק">
        </a>
      </div>
<button class="admin-mobile-toggle" id="adminMobileToggle" aria-label="תפריט">
  <span></span><span></span><span></span>
</button>

<div class="admin-mobile-menu" id="adminMobileMenu">
      <a href="admin.html" class="admin-btn active">Admin</a>
        <a href="#news" class="admin-btn">חדשות</a>
        <a href="#grades" class="admin-btn">השכבות</a>
        <a href="#exams" class="admin-btn">מבחנים</a>
        <a href="#board" class="admin-btn">מודעות</a>
        <a href="adminapps.html" class="admin-btn">כלי עריכה</a>
        <a href="#contact" class="admin-btn">יצירת קשר</a>
</div>

      <div class="admin-nav-right">
        <a href="admin.html" class="admin-btn active">Admin</a>
        <a href="#news" class="admin-btn">חדשות</a>
        <a href="#grades" class="admin-btn">השכבות</a>
        <a href="#exams" class="admin-btn">מבחנים</a>
        <a href="#board" class="admin-btn">מודעות</a>
        <a href="adminapps.html" class="admin-btn">כלי עריכה</a>
        <a href="#contact" class="admin-btn">יצירת קשר</a>
      </div>

    </div>
  </div>
</header>



  <!-- סיידבר שכבות לאדמין -->
  <div class="admin-grade-switcher">
    <button class="grade-filter-btn active" data-grade="all">כל השכבות</button>
    <button class="grade-filter-btn" data-grade="z">שכבת ז'</button>
    <button class="grade-filter-btn" data-grade="h">שכבת ח'</button>
    <button class="grade-filter-btn" data-grade="t">שכבת ט'</button>
  </div>

  <section>
    <div class="container">

      <p id="auth-status" class="section-subtitle">בודק התחברות...</p>

      <!-- LOGIN -->
      <div id="login-section">
        <div class="section-header">
          <h2 class="section-title">התחברות אדמין</h2>
          <p class="section-subtitle">כניסה למנהלי המערכת בלבד</p>
        </div>

        <form id="login-form" style="max-width:360px;margin:0 auto;">
          <label>אימייל</label>
          <input type="email" name="email" required />

          <label>סיסמה</label>
          <input type="password" name="password" required />

          <button type="submit" style="width:100%;margin-top:10px;">כניסה</button>
        </form>

<div class="login-links">
  <a class="login-link" href="reset-password.html">שכחתי סיסמה?</a>
  <span class="dot" aria-hidden="true">•</span>
  <a class="login-link" href="register.html">בקשת הרשמה</a>
</div>



      </div>

      <!-- ADMIN PANEL -->
      <div id="admin-section" class="admin-layout" style="display:none;">
        <button id="logout-btn" class="btn-outline">התנתקות</button>

        <div class="section-header" id="contact">
          <h2 class="section-title">ניהול חדשות, מבחנים, מודעות ותוכן האתר</h2>
          <p class="section-subtitle">כל שינוי נשמר אוטומטית ונראה באתר התלמידים.</p>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px;">
          <a href="adminapps.html" target="_blank" class="btn-outline" style="display:inline-block;padding:8px 16px;border-radius:999px;">
            כלי עריכה נוספים 🛠️ קוד כניסה - 1992
          </a>
        </div>

        <!-- NEWS -->
        <div id="news"></div>
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">חדשות לפי כיתות</h3>
        <p class="section-subtitle">ניתן להוסיף עד שתי תמונות לידיעה (קישורים או קבצים) + צבע טקסט (אופציונלי).</p>

        <div class="admin-columns" id="grades">
          <!-- NEWS Z -->
          <section class="admin-grade-section" data-grade="z">
            <div class="card">
              <h3>שכבת ז'</h3>
              <div id="admin-news-z" class="admin-list"></div>

              <form id="news-form-z">
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="z1">ז1</option>
                  <option value="z2">ז2</option>
                  <option value="z3">ז3</option>
                  <option value="z4">ז4</option>
                  <option value="z5">ז5</option>
                </select>

                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה 1 (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <label>תמונה 1 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>קישור לתמונה 2 (אופציונלי)</label>
                <input name="imageUrl2" placeholder="https://..." />

                <label>תמונה 2 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile2" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לז'</button>
              </form>
            </div>
          </section>

          <!-- NEWS H -->
          <section class="admin-grade-section" data-grade="h">
            <div class="card">
              <h3>שכבת ח'</h3>
              <div id="admin-news-h" class="admin-list"></div>

              <form id="news-form-h">
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="h1">ח1/7</option>
                  <option value="h4">ח4/8</option>
                  <option value="h5">ח5/9</option>
                  <option value="h6">ח6/10</option>
                </select>

                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה 1 (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <label>תמונה 1 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>קישור לתמונה 2 (אופציונלי)</label>
                <input name="imageUrl2" placeholder="https://..." />

                <label>תמונה 2 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile2" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לח'</button>
              </form>
            </div>
          </section>

          <!-- NEWS T -->
          <section class="admin-grade-section" data-grade="t">
            <div class="card">
              <h3>שכבת ט'</h3>
              <div id="admin-news-t" class="admin-list"></div>

              <form id="news-form-t">
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="t1">ט1</option>
                  <option value="t2">ט2</option>
                  <option value="t3">ט3</option>
                  <option value="t4">ט4</option>
                  <option value="t5">ט5</option>
                </select>

                <label>כותרת</label>
                <input name="title" />

                <label>מידע קצר (תאריך/אירוע)</label>
                <input name="meta" />

                <label>קישור לתמונה 1 (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />

                <label>תמונה 1 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile" accept="image/*" />

                <label>קישור לתמונה 2 (אופציונלי)</label>
                <input name="imageUrl2" placeholder="https://..." />

                <label>תמונה 2 מקובץ (אופציונלי)</label>
                <input type="file" name="imageFile2" accept="image/*" />

                <label>צבע הטקסט (אופציונלי)</label>
                <input type="color" name="color" value="#ffffff" />

                <label>תוכן הידיעה</label>
                <textarea name="body"></textarea>

                <button type="submit">הוסף חדשות לט'</button>
              </form>
            </div>
          </section>
        </div>

        <br><br>

        <!-- EXAMS -->
        <div id="exams"></div>
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">לוח מבחנים - נא לא למחוק מבחנים קיימים.</h3>

        <div class="admin-columns">
          <!-- Z -->
          <section class="admin-grade-section" data-grade="z">
            <div class="card">
              <h3>מבחנים · ז'</h3>
              <div id="admin-exams-z" class="admin-list"></div>

              <form id="exams-form-z" class="admin-form" data-grade="z">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />
                <label>שעת המבחן</label>
                <input type="time" name="time" />
                <label>מקצוע</label>
                <input name="subject" />
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="z1">ז1</option><option value="z2">ז2</option><option value="z3">ז3</option><option value="z4">ז4</option><option value="z5">ז5</option>
                </select>
                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>
                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />
                <button type="submit">הוסף מבחן לז'</button>
              </form>
            </div>
          </section>

          <!-- H -->
          <section class="admin-grade-section" data-grade="h">
            <div class="card">
              <h3>מבחנים · ח'</h3>
              <div id="admin-exams-h" class="admin-list"></div>

              <form id="exams-form-h" class="admin-form" data-grade="h">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />
                <label>שעת המבחן</label>
                <input name="time" type="time" />
                <label>מקצוע</label>
                <input name="subject" />
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="h1">ח1/7</option><option value="h4">ח4/8</option><option value="h5">ח5/9</option><option value="h6">ח6/10</option>
                </select>
                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>
                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />
                <button type="submit">הוסף מבחן לח'</button>
              </form>
            </div>
          </section>

          <!-- T -->
          <section class="admin-grade-section" data-grade="t">
            <div class="card">
              <h3>מבחנים · ט'</h3>
              <div id="admin-exams-t" class="admin-list"></div>

              <form id="exams-form-t" class="admin-form" data-grade="t">
                <label>תאריך המבחן</label>
                <input name="date" type="text" placeholder="למשל: 22/10/24" required />
                <label>שעת המבחן</label>
                <input name="time" type="time" />
                <label>מקצוע</label>
                <input name="subject" />
                <label>כיתה</label>
                <select name="classId" required>
                  <option value="">בחר כיתה</option>
                  <option value="t1">ט1</option><option value="t2">ט2</option><option value="t3">ט3</option><option value="t4">ט4</option><option value="t5">ט5</option>
                </select>
                <label>נושא המבחן</label>
                <textarea name="topic"></textarea>
                <label>קישור לתמונה (אופציונלי)</label>
                <input name="imageUrl" placeholder="https://..." />
                <button type="submit">הוסף מבחן לט'</button>
              </form>
            </div>
          </section>
        </div>

        <br><br>

        <div class="card" style="margin-top:16px;">
          <h3 style="margin:0 0 10px;">הודעה דחופה</h3>

          <label style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
            <input type="checkbox" id="urgentActive">
            <span>פעילה</span>
          </label>

          <label style="display:block; margin-bottom:8px; font-weight:800;">סוג</label>
          <select id="urgentType" style="width:100%; padding:10px; border-radius:12px; margin-bottom:10px;">
            <option value="info">רגילה (כחול)</option>
            <option value="warn">אזהרה (צהוב)</option>
            <option value="danger">דחוף (אדום)</option>
          </select>

          <label style="display:block; margin-bottom:8px; font-weight:800;">טקסט</label>
          <textarea id="urgentText" rows="3" style="width:100%; padding:10px; border-radius:12px;"></textarea>

          <label>צבע הודעה</label>
          <input id="urgentColor" type="color" value="#fbbf24">

          <div style="display:flex; gap:10px; margin-top:10px;">
            <button id="urgentSave" class="btn">שמירה</button>
            <button id="urgentClear" class="btn" style="opacity:.85;">מחיקה</button>
          </div>

          <div id="urgentStatus" style="margin-top:10px; opacity:.8;"></div>
        </div>

        <!-- BOARD -->
        <div id="board"></div>
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">
          לוח מודעות נא לא למחוק מודעות אחרות,זה מוחק את דף הכתבה
        </h3>

        <div class="admin-columns">
          <div class="card">
            <h3>מודעות כלליות</h3>
            <div id="admin-board" class="admin-list"></div>

            <form id="board-form">
              <label>כותרת</label><input name="title" />
              <label>מידע קצר (מי קהל היעד, תאריך וכו')</label><input name="meta" />
              <label>צבע הטקסט (אופציונלי)</label><input type="color" name="color" value="#ffffff" />

              <label>קישור לתמונה 1 (אופציונלי)</label><input name="imageUrl" placeholder="https://..." />
              <label>העלה קובץ תמונה 1 (אופציונלי)</label><input type="file" name="imageFile" accept="image/*" />

              <label>קישור לתמונה 2 (אופציונלי)</label><input name="imageUrl2" placeholder="https://..." />
              <label>העלה קובץ תמונה 2 (אופציונלי)</label><input type="file" name="imageFile2" accept="image/*" />

              <label>קישור לתמונה 3 (אופציונלי)</label><input name="imageUrl3" placeholder="https://..." />
              <label>העלה קובץ תמונה 3 (אופציונלי)</label><input type="file" name="imageFile3" accept="image/*" />

              <label>תוכן המודעה</label><textarea name="body"></textarea>
              <button type="submit">הוסף מודעה</button>
            </form>
          </div>
        </div>

        <br><br>

        <!-- SITE CONTENT -->
        <div id="sitecontent"></div>
        <h3 class="section-title" style="font-size:1.2rem;margin-bottom:10px;">ניהול תוכן האתר</h3>
        <p class="section-subtitle">כל השדות כאן נשמרים במסמך Firestore אחד (siteContent/main) ומוזנים לכל חלקי האתר.</p>

        <div class="admin-columns">
          <div class="card">
            <h3>טקסטים כלליים</h3>

            <form id="site-content-form" class="admin-form">
              <h4>דף בית – אזור הירו (המשפטים הגדולים למעלה)</h4>
              <label>כותרת ראשית בהירו</label>
              <input name="homeHeroTitle" placeholder="ברוכים הבאים ליערת העמק" />
              <label>תת־כותרת בהירו</label>
              <input name="homeHeroSubtitle" placeholder="סביבת למידה בטוחה, תומכת ומובילה..." />

              <h4 style="margin-top:16px;">תיבת "מידע מהיר" בהירו</h4>
              <label>כותרת התיבה</label>
              <input name="heroSideTitle" placeholder="מידע מהיר" />
              <label>שורות 'מידע מהיר' (כל שורה – שורה בנפרד ברשימה)</label>
              <textarea name="heroSideList" rows="3"
                placeholder="📍 מגדל העמק&#10;🧑‍🎓 שכבות ז'–ט'&#10;👩‍🏫 צוות חינוכי מסור&#10;🤝 שיתופי פעולה קהילתיים"></textarea>

              <h4 style="margin-top:16px;">אודות בית הספר</h4>
              <label>כותרת אודות</label>
              <input name="aboutTitle" placeholder="אודות בית הספר יערת העמק" />
              <label>טקסט אודות</label>
              <textarea name="aboutBody" rows="4" placeholder="כמה משפטים על בית הספר, הערכים, האווירה..."></textarea>

              <h4 style="margin-top:16px;">מדור "חשוב לדעת"</h4>
              <label>כותרת המדור</label>
              <input name="importantTitle" placeholder="חשוב לדעת" />
              <label>תת־כותרת המדור</label>
              <input name="importantSubtitle" placeholder="כמה דברים שימושיים לתלמידים – לפני שממשיכים לגלול." />

              <h5 style="margin-top:10px;">כרטיס 1</h5>
              <label>כותרת כרטיס 1</label>
              <input name="importantCard1Title" placeholder="לדוגמה: 💻 סביבת למידה דיגיטלית" />
              <label>טקסט כרטיס 1</label>
              <textarea name="importantCard1Body" rows="2"></textarea>

              <h5 style="margin-top:10px;">כרטיס 2</h5>
              <label>כותרת כרטיס 2</label>
              <input name="importantCard2Title" placeholder="לדוגמה: 🤝 עם מי מדברים?" />
              <label>טקסט כרטיס 2</label>
              <textarea name="importantCard2Body" rows="2"></textarea>

              <h5 style="margin-top:10px;">כרטיס 3</h5>
              <label>כותרת כרטיס 3</label>
              <input name="importantCard3Title" placeholder="לדוגמה: 📌 טיפ נוסף" />
              <label>טקסט כרטיס 3</label>
              <textarea name="importantCard3Body" rows="2"></textarea>

              <h4 style="margin-top:16px;">כותרות למדורי דף הבית</h4>
              <label>כותרת מדור חדשות</label>
              <input name="homeNewsTitle" placeholder="חדשות אחרונות" />
              <label>תת־כותרת מדור חדשות</label>
              <input name="homeNewsSubtitle" placeholder="שלושת העדכונים האחרונים מכל שכבה – ישר מול העיניים של התלמידים." />
              <label>כותרת מדור לוח מודעות</label>
              <input name="boardTitle" placeholder="לוח מודעות" />
              <label>תת־כותרת מדור לוח מודעות</label>
              <input name="boardSubtitle" placeholder="הודעות חשובות, פעילויות ואירועים לבית הספר." />
              <label>כותרת מדור מבחנים</label>
              <input name="homeExamsTitle" placeholder="מבחנים קרובים" />
              <label>תת־כותרת מדור מבחנים</label>
              <input name="homeExamsSubtitle" placeholder="תאריכים, מקצועות ונושאים – כדי שאף אחד לא יפספס." />

              <h4 style="margin-top:16px;">מדור "היכרות עם השכבות"</h4>
              <label>כותרת המדור</label>
              <input name="gradesSectionTitle" placeholder="היכרות עם השכבות" />
              <label>תת־כותרת המדור</label>
              <input name="gradesSectionSubtitle" placeholder="בחר שכבה כדי לראות חדשות, מבחנים ועדכונים שמתאימים אליך." />

              <h5 style="margin-top:10px;">תיאור שכבות</h5>
              <label>תיאור שכבת ז'</label>
              <textarea name="zDescription" rows="2" placeholder="משפט על שכבת ז'..."></textarea>
              <label>תיאור שכבת ח'</label>
              <textarea name="hDescription" rows="2" placeholder="משפט על שכבת ח'..."></textarea>
              <label>תיאור שכבת ט'</label>
              <textarea name="tDescription" rows="2" placeholder="משפט על שכבת ט'..."></textarea>

              <h4 style="margin-top:16px;">תיבת בקשות</h4>
              <label>כותרת המדור</label>
              <input name="requestsTitle" placeholder="תיבת בקשות" />
              <label>תת־כותרת</label>
              <input name="requestsSubtitle" placeholder="רוצים לבקש משהו? יש רעיון?" />
              <label>טקסט מעל הכפתור</label>
              <textarea name="requestsBody" rows="2" placeholder="למילוי טופס הבקשות – לחצו כאן:"></textarea>

              <h4 style="margin-top:16px;">יצירת קשר</h4>
              <label>כותרת המדור</label>
              <input name="contactSectionTitle" placeholder="יצירת קשר" />
              <label>תת־כותרת המדור</label>
              <input name="contactSectionSubtitle" placeholder="ניתן לפנות אלינו בכל שאלה, בקשה או התייעצות." />
              <label>טלפון</label>
              <input name="contactPhone" placeholder="04-XXXXXXX" />
              <label>אימייל</label>
              <input name="contactEmail" placeholder="school@example.com" />
              <label>כתובת</label>
              <input name="contactAddress" placeholder="רחוב..., מגדל העמק" />

              <h4 style="margin-top:16px;">פוטר</h4>
              <label>טקסט תחתון (פוטר)</label>
              <input name="footerText" placeholder="© כל הזכויות שמורות לבית ספר יערת העמק" />

              <button type="submit" style="margin-top:16px;">שמור תוכן אתר</button>
            </form>
          </div>
        </div>

      </div><!-- /#admin-section -->

    </div><!-- /.container -->
  </section>

  <!-- ✅ THEME + MOBILE NAV (ADMIN ONLY) -->
  <script>
document.addEventListener("DOMContentLoaded", () => {
  const gradeButtons = document.querySelectorAll(".grade-filter-btn");
  const gradeSections = document.querySelectorAll(".admin-grade-section[data-grade]");
  const columns = document.querySelector(".admin-columns");

  if (!gradeButtons.length || !gradeSections.length) {
    console.warn("Grade filter: elements not found");
    return;
  }

  function updateOneVisibleClass() {
    if (!columns) return;
    const visibleCount = Array.from(gradeSections).filter(
      (sec) => sec.style.display !== "none"
    ).length;
    columns.classList.toggle("one-visible", visibleCount === 1);
  }

  gradeButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const selected = btn.dataset.grade || "all";

      gradeButtons.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");

      gradeSections.forEach((sec) => {
        const g = sec.dataset.grade;
        sec.style.display = selected === "all" || g === selected ? "" : "none";
      });

      // ✅ חשוב: לעדכן אחרי הסינון
      updateOneVisibleClass();
    });
  });

  // ✅ חשוב: עדכון ראשון כשהעמוד נטען
  updateOneVisibleClass();
});


// ===== MOBILE MENU TOGGLE (admin) =====
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("adminMobileToggle");
  const menu = document.getElementById("adminMobileMenu");
  if (!toggle || !menu) return;

  const closeMenu = () => {
    menu.classList.remove("open");
    toggle.setAttribute("aria-expanded", "false");
  };

  toggle.addEventListener("click", (e) => {
    e.preventDefault();
    e.stopPropagation();
    menu.classList.toggle("open");
    toggle.setAttribute(
      "aria-expanded",
      menu.classList.contains("open") ? "true" : "false"
    );
  });

  document.addEventListener("click", (e) => {
    if (!menu.classList.contains("open")) return;
    if (menu.contains(e.target) || toggle.contains(e.target)) return;
    closeMenu();
  });

  menu.querySelectorAll("a").forEach((a) => {
    a.addEventListener("click", () => closeMenu());
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeMenu();
  });
});


    (function () {
      const key = "admin_theme";
      const themeBtn = document.getElementById("admin-theme-toggle");
      const navToggle = document.getElementById("navToggle");
      const navMobile = document.getElementById("nav-mobile");

      function setIcon(theme){
        if (!themeBtn) return;
        themeBtn.textContent = (theme === "dark") ? "🌙" : "☀️";
      }

      function apply(theme){
        document.documentElement.setAttribute("data-theme", theme);
        try { localStorage.setItem(key, theme); } catch {}
        setIcon(theme);
      }

      // init
      const current = document.documentElement.getAttribute("data-theme") || "dark";
      apply(current);

      if (themeBtn){
        themeBtn.addEventListener("click", function(){
          const now = document.documentElement.getAttribute("data-theme") || "dark";
          apply(now === "dark" ? "light" : "dark");
        });
      }

      // mobile menu toggle
      if (navToggle && navMobile){
        navToggle.addEventListener("click", () => navMobile.classList.toggle("open"));
        // close on link click
        navMobile.querySelectorAll("a").forEach(a=>{
          a.addEventListener("click", ()=> navMobile.classList.remove("open"));
        });
        // click outside close
        document.addEventListener("click", (e)=>{
          if (!navMobile.classList.contains("open")) return;
          const inside = navMobile.contains(e.target) || navToggle.contains(e.target);
          if (!inside) navMobile.classList.remove("open");
        });
      }
    })();
  </script>

  <script type="module" src="admin.js?v=7"></script>
  <script type="module" src="./admin-urgent.js"></script>
  <script src="accessibility.js"></script>
</body>
</html>
